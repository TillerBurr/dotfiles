- defaults:
    link:
      relink: true
- clean:
    - '~'

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - command: 'cp .gitconfig-local ~/.gitconfig.local'
- sudo:
    - shell:
        - command: ./apt_install.sh -y
          stdout: true
          stderr: true
- shell:
    - command: ./asdf/install_asdf.sh
      stdout: true
      stderr: true
    - command: 'sh -c "$(curl -fsSL https://starship.rs/install.sh)" -y -f'
- asdf:
    # - asdf_path: ~/.asdf/asdf.sh
    - plugin: python
      url: https://github.com/asdf-community/asdf-python
      global: 3.11.1
      versions:
        - 3.11.1
    - plugin: nodejs
      url: https://github.com/asdf-vm/asdf-nodejs
    - plugin: pnpm
      url: https://github.com/jonathanmorley/asdf-pnpm
- create:
    - ~/code
- shell:
    - command: fish ./python/install.fish
- pipx:
    - file: python/pipx-requirements.txt
- shell:
    - command: ./rust/install_rust.sh
      stdout: true
      stderr: true
    - command: fish ./fish/install.fish
      stderr: true
      stdout: true
- link:
    ~/.gitconfig: .gitconfig
    ~/.config/fish/config.fish:
      path: fish/config.fish
      force: true
      create: true
    ~/.config/fish/functions/up.fish:
      path: fish/functions/up.fish
      create: true
    ~/.config/fish/completions/asdf.fish:
      path: ~/.asdf/completions/asdf.fish
      create: true
    ~/.config/fish/functions/cat.fish:
      path: fish/functions/cat.fish
      create: true
    ~/.config/fish/functions/ls.fish:
      path: fish/functions/ls.fish
      create: true
    ~/.config/fish/functions/mkcd.fish:
      path: fish/functions/mkcd.fish
      create: true
    ~/.config/starship.toml: starship.toml
